<!--<div class="h-full">-->
@for (cat of category().subCats(); track cat.name()) {
    <p-panel [header]="cat.name()" [toggleable]="true" [(collapsed)]="cat.isCollapsed" class="mb-4">
        
        @for (grp of cat.groups(); track grp.name()) {
            
            <div class="mb-4 last:mb-0">
                <p-fieldset legend="{{grp.name()}}" toggleable="false">
                    <div class="ml-4 grid grid-cols-[auto-1fr] lg:grid-cols-[minmax(10%,auto)_1fr_minmax(10%,auto)_1fr] gap-x-2 gap-y-2 items-center">
                    @for (prop of grp.properties(); track prop.name()) {
                        @if (prop.canSet()) {
                            <span class="text-blue-400 text-s my-1" (click)="showSetPropertyDialog(prop)">{{ prop.name() }}</span>
                        } @else {
                            <span class="text-stone-400 text-s my-1">{{ prop.name() }}</span>
                        }
<!--                    <button *ngIf="prop.canSet" class="text-blue-500 text-xs text-left"-->
<!--                            (click)="showSetPropertyDialog(prop)">{{ prop.name }}-->
<!--                    </button>-->
<!--                    <span class="prop-value" (dblclick)="handleDoubleClick(prop, $event)"-->
<!--                          [matTooltip]="prop.value" [matTooltipShowDelay]="0" matTooltipPosition="below"-->
<!--                          matTooltipClass="tooltips">{{ prop.value }}</span>-->
                        <span class="text-lime-500 text-s my-1">{{ prop.value() }}</span>
                    }
            </div>
                    
                </p-fieldset>      
            </div>
        }
        
    </p-panel>
}


@for (sink of category().eventSinks(); track sink.name) {
    <p-panel [header]="sink.name" [toggleable]="true" [(collapsed)]="sink.isCollapsed" class="mb-4">
        <div class="h-[300px] overflow-y-auto border border-gray-700 rounded">
            <table class="w-full border-collapse text-sm">
                <thead class="sticky top-0 bg-gray-800 z-10">
                    <tr>
                        <th class="p-2 text-left w-20">Id</th>
                        <th class="p-2 text-left w-44 whitespace-nowrap">Date</th>
                        <th class="p-2 text-left w-20">Level</th>
                        <th class="p-2 text-left">Message</th>
                    </tr>
                </thead>
                <tbody>
                    @for (event of sink.filteredEvents(); track event.sinkSeq) {
                        <tr class="border-b border-gray-700 event-row-{{event.level | levelToString | lowercase }}">
                            <td class="p-2">{{ event.sinkSeq }}</td>
                            <td class="p-2 whitespace-nowrap">{{ event.date | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                            <td class="p-2">{{ event.level | levelToString }}</td>
                            <td class="p-2">{{ event.message }}</td>
                        </tr>
                    } @empty {
                        <tr>
                            <td colspan="4" class="p-4 text-center text-gray-500">No events</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </p-panel>
        
}

<!--</div>-->
